<!DOCTYPE html>
<html lang="en">

 	<head>
 		<!-- Meta Tags -->
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<!-- Title -->
 		<title>CoinLess</title>
 		<!-- Style Sheet -->
		<link rel="stylesheet" type="text/css" href="css/style.css" />
		<!-- Javascript -->	
		<script type="text/javascript" src="js/jquery.min.js"></script>
 	</head>
<body>
	<header>
		<div class="container">
			<div class="brand">
				<div class="logo">
					<div class="logo-text">
						<p class="big-logo">CoinLess</p>
						<p class="small-logo">e-commerce</p>
					</div>
					</a>
				</div> <!-- logo -->
			</div> <!-- brand -->
		</div> <!-- container -->
	</header> <!-- header -->

	<div class="container">
		<main>
			<div class="logreg">
				<h2 class="heading">Login Form</h2>
				<form class="checkout-form" method="post" id="formA">
					<div class="form-group">
						<label>Email Address</label>
						<input type="email" id="emailA" name="email">
					</div>
					<div class="form-group">
						<label>Password</label>
						<input type="password" id="passwordA" name="password">
					</div>
					<div class="form-group">
						<label></label>
						<input type="submit" value="Login">
					</div>
					<br><p>OR</p><br><a href="register.html">Register</a>
				</form>	
			</div>
		</main> <!-- Main Area -->
	</div>
	<script>
        $(() => {
          $("#formA").submit(function (event) {
            event.preventDefault();
            var formData = {
              email: $("#emailA").val(),
              pass: $("#passwordA").val(),
            };
  
            $.ajax({
              type: "POST",
              url: "https://coinless.herokuapp.com/api/login",
              data: formData,
              dataType: "json",
              encode: true,
              success: function(data) {
                document.cookie = "masuk=" + data.jwt;
                window.location = "https://coinless.herokuapp.com/index";
              },
              error: function(jqXHR, textStatus, errorThrown) {
                const myObj = JSON.parse(jqXHR.responseText);     
                alert(myObj.message);
              }
            });
          });
        });
      </script>
</body>
</html>